---
- hosts: localhost
  connection: local
  become: true

  pre_tasks:
    - name: update repositories
      apt:
        update_cache: yes
      changed_when: False
      when: ansible_distribution in ["Debian", "Ubuntu", "Pop!_OS"]

  tasks:
    - name: execute base role (all systems)
      include_role:
        name: base

    - name: execute workstation role on desktop1
      include_role:
        name: workstation
      when: ansible_default_ipv4.address == "192.168.178.2"